<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="document.doc.mapper.DocMapper">

    <!-- 문서 목록 조회 -->
    <select id="getDocList" resultType="document.doc.dto.DocDto">
        SELECT *
        FROM tb_document
        WHERE 1=1
        <if test="docName != null and docName != ''">
            AND  DOC_NAME = #{docName}
        </if>
        <if test="docStatus != null and docStatus != ''">
            AND  DOC_STATUS = #{docStatus}
        </if>
        <if test="orgFilename != null and orgFilename != ''">
            AND  ORG_FILENAME = #{orgFilename}
        </if>
        ORDER BY CRT_DT DESC
    </select>

    <!-- 문서 아이디로 조회 -->
    <select id="getDocrByDocId" resultType="document.doc.dto.DocDto" parameterType="String">
        SELECT *
        FROM tb_document
        WHERE DOC_ID = #{docId}
    </select>

    <!-- 문서 삭제 -->
    <delete id="deleteDoc" parameterType="string">
        DELETE FROM tb_document
        WHERE DOC_ID = #{docId}
    </delete>

    <!-- 문서 등록 -->
    <insert id="insertDoc" parameterType="string">
        INSERT INTO tb_document (
            DOC_DT,
            DOC_NAME,
            ORG_FILENAME,
            SAVE_FILENAME,
            DOC_FILEPATH,
            DOC_STATUS,
            SERVER_NUM,
            CRT_ID,
            CRT_DT
        )
        VALUES (
                   NOW(),
                   #{docName},
                   #{orgFilename},
                   #{saveFilename},
                   #{docFilepath},
                   0,
                   #{serverNum},
                   #{crtId},
                   NOW()
               )
    </insert>

</mapper>
